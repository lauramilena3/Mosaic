

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Cluster Execution &mdash; Mosaic 1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Requirements" href="../getting_started/userGuide.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Mosaic
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/userGuide.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/userGuide.html#installation">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/userGuide.html#running-mosaic">Running Mosaic</a></li>
</ul>
<p class="caption"><span class="caption-text">Project Info</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Cluster Execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="#config-file">Config File</a></li>
<li class="toctree-l1"><a class="reference internal" href="#outputs">Outputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="#support">Support</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Mosaic</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Cluster Execution</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/project_info/support.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="cluster-execution">
<h1>Cluster Execution<a class="headerlink" href="#cluster-execution" title="Permalink to this headline">¶</a></h1>
<p>The use of Snakemake allows Mosaic’s jobs to be executed on cluster engines with SURFsara-Grid, PBS-TORQUE or Slurm job schedulers.</p>
<p>In order to execute Mosaic in a cluster, run the following code according to your job scheduler:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">snakemake</span> <span class="o">--</span><span class="n">cluster</span> <span class="n">qsub</span> <span class="o">-</span><span class="n">j</span> <span class="mi">32</span>               <span class="c1">#PBS-TORQUE</span>
<span class="n">snakemake</span> <span class="o">--</span><span class="n">cluster</span> <span class="n">sbatch</span> <span class="o">-</span><span class="n">j</span> <span class="mi">32</span>             <span class="c1">#Slurm</span>
</pre></div>
</div>
<p>For additional information about cluster configuration, please refer to Snakemake examples
avaliable <a class="reference external" href="https://snakemake.readthedocs.io/en/stable/snakefiles/configuration.html#cluster-configuration">here</a>.</p>
</div>
<div class="section" id="config-file">
<h1>Config File<a class="headerlink" href="#config-file" title="Permalink to this headline">¶</a></h1>
<p>Many values can be modified depending on user needs. Mosaic’s JSON config file allows the user to select types of data and thresholds used for the analysis depending on their needs. This file may be used as supplementary material to replicate the analyses. Using this, plus the conda JSON files describing all dependencies versions, we expect the users to consistently retrieve the same results independent on the machine.</p>
<p>In order to change this values, you can append the desired values to the main command. For example, in order to change the minimun length of a contig to 2000bp, you can use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>snakemake -j $nCores --use-conda --config min_len=2000 basecalled_data=$fastqDir results_dir=$reusultDir
</pre></div>
</div>
<p>Below, you can find all the variables, and their default values.</p>
<p>General:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="25%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>input_dir</td>
<td>“data/00_RAW_DATA”</td>
<td>Input folder with raw data</td>
</tr>
<tr class="row-odd"><td>results_dir</td>
<td>“data”</td>
<td>Directory for output files</td>
</tr>
<tr class="row-even"><td>operating_system</td>
<td>“linux”</td>
<td>Operating system ([linux], [macOs])</td>
</tr>
<tr class="row-odd"><td>forward_tag</td>
<td>“R1”</td>
<td>Forward tag used for Illumina reads</td>
</tr>
<tr class="row-even"><td>reverse_tag</td>
<td>“R2”</td>
<td>Reverse tag used for Illumina reads</td>
</tr>
<tr class="row-odd"><td>nanopore_tag</td>
<td>“nanopore”</td>
<td>Tag used for Nanopore files</td>
</tr>
</tbody>
</table>
<p>Nanopore:</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="24%" />
<col width="51%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>nanopore_pooled</td>
<td>“False”</td>
<td>Nanopore run pooling</td>
</tr>
<tr class="row-odd"><td>nanopore_pooled_name</td>
<td>“raw”</td>
<td>Tag used for pooled Nanopore run</td>
</tr>
</tbody>
</table>
<p>Trimmomatic:</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="22%" />
<col width="48%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>trimmomatic_leading</td>
<td>“15”</td>
<td>Leading minimum base quality</td>
</tr>
<tr class="row-odd"><td>trimmomatic_trailing</td>
<td>“15”</td>
<td>Trailing minimum base quality</td>
</tr>
<tr class="row-even"><td>trimmomatic_window_size</td>
<td>“4”</td>
<td>Window size</td>
</tr>
<tr class="row-odd"><td>trimmomatic_window_quality</td>
<td>“15”</td>
<td>Window minimum quality</td>
</tr>
<tr class="row-even"><td>trimmomatic_minlen</td>
<td>“50”</td>
<td>Read minimum length</td>
</tr>
</tbody>
</table>
<p>Cleaning:
contaminants_list: “GCF_000819615.1”
adapters_file: “NexteraPE-PE.fa”</p>
<p>Normalization and Subsampling
min_norm: “2”
max_norm: “100”
max_subsample: “20000000”</p>
<p>Contig
min_len: “1000”
min_cov: “2”</p>
</div>
<div class="section" id="outputs">
<h1>Outputs<a class="headerlink" href="#outputs" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="support">
<h1>Support<a class="headerlink" href="#support" title="Permalink to this headline">¶</a></h1>
<p>The easiest way to get help with the project is to join the #crawler
channel on Freenode.</p>
<p>We hang out there and you can get real-time help with your projects.
The other good way is to open an issue on Github.</p>
<p>The mailing list at <a class="reference external" href="https://groups.google.com/forum/#!forum/crawler">https://groups.google.com/forum/#!forum/crawler</a> is also available for support.</p>
<p>Freenode: <a class="reference external" href="irc://freenode.net">freenode</a></p>
<p>Github: <a class="reference external" href="http://github.com/example/crawler/issues">github_page</a></p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../getting_started/userGuide.html" class="btn btn-neutral float-left" title="Requirements" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Laura M Forero

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>